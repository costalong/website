import{_ as s}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as i,o as a,a as e}from"./app-2R1on7TL.js";const n={},t=e(`<h2 id="_1-master-一直处于-notready-状态" tabindex="-1"><a class="header-anchor" href="#_1-master-一直处于-notready-状态"><span>1. master 一直处于 NotReady 状态</span></a></h2><p>安装后查询 master 节点状态:</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">kubectl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> get</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> nodes</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>如果 master 节点一直处于 NotReady 状态,请排查以下方法:</p><ol><li>检查 kubelet 的日志,查看是否有报错信息</li></ol><div class="language-sh line-numbers-mode" data-highlighter="shiki" data-ext="sh" data-title="sh" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">journalctl</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -u</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> kubelet</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>或查询 kubelet 状态，</p><div class="language-sh line-numbers-mode" data-highlighter="shiki" data-ext="sh" data-title="sh" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">systemctl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> status</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> kubelet</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ol start="2"><li>检查 查看 node</li></ol><div class="language-sh line-numbers-mode" data-highlighter="shiki" data-ext="sh" data-title="sh" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> kubectl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> describe</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> node</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> node</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -n</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> kube-system</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> | </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">grep</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -A</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 20</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;Conditions&quot;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>输出：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Conditions:</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">  Type</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">             Status</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  LastHeartbeatTime</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">                 LastTransitionTime</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">                Reason</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">                       Message</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">  ----</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">             ------</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  -----------------</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">                 ------------------</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">                ------</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">                       -------</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">  MemoryPressure</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   False</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   Wed,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 07</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Aug</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 2024</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 23:56:24</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> +0800</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   Mon,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 05</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Aug</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 2024</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 22:19:19</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> +0800</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   KubeletHasSufficientMemory</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   kubelet</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> has</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> sufficient</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> memory</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> available</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">  DiskPressure</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">     False</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   Wed,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 07</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Aug</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 2024</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 23:56:24</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> +0800</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   Mon,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 05</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Aug</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 2024</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 22:19:19</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> +0800</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   KubeletHasNoDiskPressure</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">     kubelet</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> has</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> no</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> disk</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> pressure</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">  PIDPressure</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">      False</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   Wed,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 07</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Aug</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 2024</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 23:56:24</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> +0800</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   Mon,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 05</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Aug</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 2024</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 22:19:19</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> +0800</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   KubeletHasSufficientPID</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">      kubelet</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> has</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> sufficient</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> PID</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> available</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">  Ready</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            False</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   Wed,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 07</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Aug</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 2024</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 23:56:24</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> +0800</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   Mon,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 05</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Aug</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 2024</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 22:19:19</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> +0800</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   KubeletNotReady</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">              container</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> runtime</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> network</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> not</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ready:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> NetworkReady=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">false</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> reason:NetworkPluginNotReady</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> message:Network</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> plugin</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> returns</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> error:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> cni</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> plugin</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> not</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> initialized</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Addresses:</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">  InternalIP:</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  10.0.12.8</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">  Hostname:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    node</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Capacity:</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">  cpu:</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">                4</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">  ephemeral-storage:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  185653816Ki</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">  hugepages-1Gi:</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      0</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">  hugepages-2Mi:</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      0</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">  memory:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">             7607692Ki</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">  pods:</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">               110</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Allocatable:</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">  cpu:</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">                4</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">  ephemeral-storage:</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  171098556543</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">  hugepages-1Gi:</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">      0</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>如果出现错误信息：<code>NetworkReady=false reason:NetworkPluginNotReady message:Network plugin returns error: cni plugin not initialized</code>，请检</p><p>查网络插件是否安装成功。如果没有安装，安装网络插件（Flannel）。</p><p>安装命令</p><div class="language-sh line-numbers-mode" data-highlighter="shiki" data-ext="sh" data-title="sh" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> kubectl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> apply</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -f</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> https://raw.githubusercontent.com/coreos/flannel/master/Documentation/kube-flannel.yml</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>注意：如果无法访问外网的情况，可以下载 flannel.yaml 文件，然后修改镜像地址，然后执行安装命令。<a href="https://gist.github.com/y0ngb1n/7e8f16af3242c7815e7ca2f0833d3ea6" target="_blank" rel="noopener noreferrer">Docker Hub 镜像加速器</a></p><p>如果无法安装成功，可以查看 kube-flannel 的日志，查看是否有报错信息</p><div class="language-sh line-numbers-mode" data-highlighter="shiki" data-ext="sh" data-title="sh" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">kubectl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> logs</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -n</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> kube-system</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> kube-flannel-ds-amd64-24495</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="kubernets的报错-0-2-nodes-are-available-1-node-s-had-taint-env-role-that-the-pod-didn-t-tolerate-1-node-s-had-taint-node-role-kubernetes-io-master-that-the-pod-didn-t-tolerate" tabindex="-1"><a class="header-anchor" href="#kubernets的报错-0-2-nodes-are-available-1-node-s-had-taint-env-role-that-the-pod-didn-t-tolerate-1-node-s-had-taint-node-role-kubernetes-io-master-that-the-pod-didn-t-tolerate"><span>kubernets的报错：0/2 nodes are available: 1 node(s) had taint {env_role: }, that the pod didn&#39;t tolerate, 1 node(s) had taint {<a href="http://node-role.kubernetes.io/master:" target="_blank" rel="noopener noreferrer">node-role.kubernetes.io/master:</a> }, that the pod didn&#39;t tolerate</span></a></h2><p>查看 pod 的状态</p><div class="language-sh line-numbers-mode" data-highlighter="shiki" data-ext="sh" data-title="sh" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">kubectl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> describe</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> pod</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> pod-name</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -n</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> namespace</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><div class="language-sh line-numbers-mode" data-highlighter="shiki" data-ext="sh" data-title="sh" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">...</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> Type</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">     Reason</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">            Age</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   From</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">               Message</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">  ----</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">     ------</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">            ----</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  ----</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">               -------</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">  Warning</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  FailedScheduling</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  39m</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   default-scheduler</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  0/2</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> nodes</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> are</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> available:</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> node</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">s</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">had</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> taint</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> {env_role:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> },</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">that</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> the</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> pod</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> didn&#39;t tolerate, 1 node(s) had taint {node-role.kubernetes.io/master: }, that the pod didn&#39;t</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> tolerate.</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>看看node是否被打污点了</p><div class="language-sh line-numbers-mode" data-highlighter="shiki" data-ext="sh" data-title="sh" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">kubectl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> describe</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> node</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> node01</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> |</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">grep</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Taint</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Taints:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">             env_role:NoSchedule</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>污点值有三个</strong></p><ul><li>NoSchedule：一定不被调度</li><li>PreferNoSchedule：尽量不被调度【也有被调度的几率】</li><li>NoExecute：不会调度，并且还会驱逐Node已有Pod</li></ul><p>去掉污点:</p><div class="language-sh line-numbers-mode" data-highlighter="shiki" data-ext="sh" data-title="sh" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">kubectl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> taint</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> nodes</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> node01</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> env_role-</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div>`,29),h=[t];function l(k,p){return a(),i("div",null,h)}const g=s(n,[["render",l],["__file","install-error.html.vue"]]),o=JSON.parse(`{"path":"/k8s/installs/install-error.html","title":"k8s 安装的常见的错误","lang":"zh-CN","frontmatter":{"title":"k8s 安装的常见的错误","icon":"error","category":["K8S"],"description":"1. master 一直处于 NotReady 状态 安装后查询 master 节点状态: 如果 master 节点一直处于 NotReady 状态,请排查以下方法: 检查 kubelet 的日志,查看是否有报错信息 或查询 kubelet 状态， 检查 查看 node 输出： 如果出现错误信息：NetworkReady=false reason:Ne...","head":[["meta",{"property":"og:url","content":"https://costalong.com/website/k8s/installs/install-error.html"}],["meta",{"property":"og:site_name","content":"云原生笔记"}],["meta",{"property":"og:title","content":"k8s 安装的常见的错误"}],["meta",{"property":"og:description","content":"1. master 一直处于 NotReady 状态 安装后查询 master 节点状态: 如果 master 节点一直处于 NotReady 状态,请排查以下方法: 检查 kubelet 的日志,查看是否有报错信息 或查询 kubelet 状态， 检查 查看 node 输出： 如果出现错误信息：NetworkReady=false reason:Ne..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-08-17T13:13:00.000Z"}],["meta",{"property":"article:author","content":"Costa Long"}],["meta",{"property":"article:modified_time","content":"2024-08-17T13:13:00.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"k8s 安装的常见的错误\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2024-08-17T13:13:00.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Costa Long\\",\\"url\\":\\"https://costalong.com\\"}]}"]]},"headers":[{"level":2,"title":"1. master 一直处于 NotReady 状态","slug":"_1-master-一直处于-notready-状态","link":"#_1-master-一直处于-notready-状态","children":[]},{"level":2,"title":"kubernets的报错：0/2 nodes are available: 1 node(s) had taint {env_role: }, that the pod didn't tolerate, 1 node(s) had taint {node-role.kubernetes.io/master: }, that the pod didn't tolerate","slug":"kubernets的报错-0-2-nodes-are-available-1-node-s-had-taint-env-role-that-the-pod-didn-t-tolerate-1-node-s-had-taint-node-role-kubernetes-io-master-that-the-pod-didn-t-tolerate","link":"#kubernets的报错-0-2-nodes-are-available-1-node-s-had-taint-env-role-that-the-pod-didn-t-tolerate-1-node-s-had-taint-node-role-kubernetes-io-master-that-the-pod-didn-t-tolerate","children":[]}],"git":{"createdTime":1723126493000,"updatedTime":1723900380000,"contributors":[{"name":"costa92","email":"944310536@qq.com","commits":2}]},"readingTime":{"minutes":1.85,"words":554},"filePathRelative":"k8s/installs/install-error.md","localizedDate":"2024年8月8日","autoDesc":true,"excerpt":"<h2>1. master 一直处于 NotReady 状态</h2>\\n<p>安装后查询 master 节点状态:</p>\\n<div class=\\"language-bash line-numbers-mode\\" data-highlighter=\\"shiki\\" data-ext=\\"bash\\" data-title=\\"bash\\" style=\\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\\"><pre class=\\"shiki shiki-themes one-light one-dark-pro vp-code\\"><code><span class=\\"line\\"><span style=\\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\\">kubectl</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> get</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> nodes</span></span></code></pre>\\n<div class=\\"line-numbers\\" aria-hidden=\\"true\\" style=\\"counter-reset:line-number 0\\"><div class=\\"line-number\\"></div></div></div>"}`);export{g as comp,o as data};
