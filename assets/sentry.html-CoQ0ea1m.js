import{_ as s}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as i,o as n,a}from"./app-BiMiMzwI.js";const e={},l=a(`<p>Sentry是一个开源的应用性能监控（Application Performance Monitoring，APM）和错误追踪平台。 它帮助开发人员监控应用程序的性能、捕获和分析错误，以便及时发现并解决潜在的问题，提高应用程序的稳定性和用户体验</p><h2 id="安装" tabindex="-1"><a class="header-anchor" href="#安装"><span>安装</span></a></h2><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">go</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> get</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> github.com/getsentry/sentry-go</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="使用代码" tabindex="-1"><a class="header-anchor" href="#使用代码"><span>使用代码：</span></a></h2><div class="language-go line-numbers-mode" data-highlighter="shiki" data-ext="go" data-title="go" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">Sentry</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;</span><span style="--shiki-light:white;--shiki-dark:#FFFFFF;">s logoDocs</span></span>
<span class="line"><span style="--shiki-light:white;--shiki-dark:#FFFFFF;">Search Docs</span></span>
<span class="line"><span style="--shiki-light:white;--shiki-dark:#FFFFFF;">⌘K</span></span>
<span class="line"><span style="--shiki-light:white;--shiki-dark:#FFFFFF;">or</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:white;--shiki-dark:#FFFFFF;">go.gin iconGin</span></span>
<span class="line"><span style="--shiki-light:white;--shiki-dark:#FFFFFF;">Sentry for Gin</span></span>
<span class="line"><span style="--shiki-light:white;--shiki-dark:#FFFFFF;">Configuration</span></span>
<span class="line"><span style="--shiki-light:white;--shiki-dark:#FFFFFF;">Usage</span></span>
<span class="line"><span style="--shiki-light:white;--shiki-dark:#FFFFFF;">Enriching Events</span></span>
<span class="line"><span style="--shiki-light:white;--shiki-dark:#FFFFFF;">Data Management</span></span>
<span class="line"><span style="--shiki-light:white;--shiki-dark:#FFFFFF;">Set Up Tracing</span></span>
<span class="line"><span style="--shiki-light:white;--shiki-dark:#FFFFFF;">Set Up Profiling</span></span>
<span class="line"><span style="--shiki-light:white;--shiki-dark:#FFFFFF;">Set Up Crons</span></span>
<span class="line"><span style="--shiki-light:white;--shiki-dark:#FFFFFF;">Set Up User Feedback</span></span>
<span class="line"><span style="--shiki-light:white;--shiki-dark:#FFFFFF;">Migration Guide</span></span>
<span class="line"><span style="--shiki-light:white;--shiki-dark:#FFFFFF;">Troubleshooting</span></span>
<span class="line"><span style="--shiki-light:white;--shiki-dark:#FFFFFF;">Account Settings</span></span>
<span class="line"><span style="--shiki-light:white;--shiki-dark:#FFFFFF;">Organization Settings</span></span>
<span class="line"><span style="--shiki-light:white;--shiki-dark:#FFFFFF;">Product Walkthroughs</span></span>
<span class="line"><span style="--shiki-light:white;--shiki-dark:#FFFFFF;">Pricing &amp; Billing</span></span>
<span class="line"><span style="--shiki-light:white;--shiki-dark:#FFFFFF;">Sentry CLI</span></span>
<span class="line"><span style="--shiki-light:white;--shiki-dark:#FFFFFF;">Sentry API</span></span>
<span class="line"><span style="--shiki-light:white;--shiki-dark:#FFFFFF;">Security, Legal, &amp; PII</span></span>
<span class="line"><span style="--shiki-light:white;--shiki-dark:#FFFFFF;">Concepts &amp; Reference</span></span>
<span class="line"><span style="--shiki-light:white;--shiki-dark:#FFFFFF;">Codecov</span></span>
<span class="line"><span style="--shiki-light:white;--shiki-dark:#FFFFFF;">Discord</span></span>
<span class="line"><span style="--shiki-light:white;--shiki-dark:#FFFFFF;">Support</span></span>
<span class="line"><span style="--shiki-light:white;--shiki-dark:#FFFFFF;">Self-Hosting Sentry</span></span>
<span class="line"><span style="--shiki-light:white;--shiki-dark:#FFFFFF;">Developer Documentation</span></span>
<span class="line"><span style="--shiki-light:white;--shiki-dark:#FFFFFF;">Home</span></span>
<span class="line"><span style="--shiki-light:white;--shiki-dark:#FFFFFF;">Platforms</span></span>
<span class="line"><span style="--shiki-light:white;--shiki-dark:#FFFFFF;">Go</span></span>
<span class="line"><span style="--shiki-light:white;--shiki-dark:#FFFFFF;">Gin</span></span>
<span class="line"><span style="--shiki-light:white;--shiki-dark:#FFFFFF;">Gin</span></span>
<span class="line"><span style="--shiki-light:white;--shiki-dark:#FFFFFF;">Gin is a high-performance HTTP web framework written in Golang. Learn how to set it up with Sentry.</span></span>
<span class="line"><span style="--shiki-light:white;--shiki-dark:#FFFFFF;">For a quick reference, there is a complete example at the Go SDK source code repository.</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:white;--shiki-dark:#FFFFFF;">Go Dev-style API documentation is also available.</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:white;--shiki-dark:#FFFFFF;">Features</span></span>
<span class="line"><span style="--shiki-light:white;--shiki-dark:#FFFFFF;">In addition to capturing errors, you can monitor interactions between multiple services or applications by enabling tracing.</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:white;--shiki-dark:#FFFFFF;">Select which Sentry features you</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">d</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> like</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> to</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> install</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> in</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> addition</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> to</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> Error</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> Monitoring</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> to</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> get</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> the</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> corresponding</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> installation</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> and</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> configuration</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> instructions</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> below</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">Install</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">Bash</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">Copied</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">go</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> get</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> github</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">com</span><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">getsentry</span><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">sentry</span><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">-</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">go</span><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;">/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">gin</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">Go</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">Copied</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">	&quot;fmt&quot;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">	&quot;net/http&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">	sentry</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;github.com/getsentry/sentry-go&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">	sentrygin</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;github.com/getsentry/sentry-go/gin&quot;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">	&quot;github.com/gin-gonic/gin&quot;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// To initialize Sentry&#39;s handler, you need to initialize Sentry itself beforehand</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">if</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> err</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> :=</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> sentry</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Init</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">sentry</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">ClientOptions</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">	Dsn</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;https://0b5c4c7a72494aa8a43da8d56c1f7427@o84114.ingest.us.sentry.io/183603&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">	EnableTracing</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">true</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">	// Set TracesSampleRate to 1.0 to capture 100%</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">	// of transactions for tracing.</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">	// We recommend adjusting this value in production,</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">	TracesSampleRate</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1.0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}); </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">err</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> !=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> nil</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">	fmt</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Printf</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;Sentry initialization failed: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">%v</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">\\n</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">err</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// Then create your app</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">app</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> :=</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> gin</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Default</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// Once it&#39;s done, you can attach the handler as one of your middleware</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">app</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Use</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">sentrygin</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">New</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">sentrygin</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Options</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{}))</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// Set up routes</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">app</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">GET</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;/&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">func</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">ctx</span><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;"> *</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">gin</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Context</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">	ctx</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">http</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">StatusOK</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;Hello world!&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">})</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// And run it</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">app</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Run</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;:3000&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">Configure</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">sentrygin</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> accepts</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> a</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> struct</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> of</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> Options</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> that</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> allows</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> you</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> to</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> configure</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> how</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> the</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> handler</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> will</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> behave</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">Currently</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> it</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> respects</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 3</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> options</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">Go</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">Copied</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// Whether Sentry should repanic after recovery, in most cases it should be set to true,</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// as gin.Default includes its own Recovery middleware that handles http responses.</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">Repanic</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> bool</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// Whether you want to block the request before moving forward with the response.</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// Because Gin&#39;s default \`Recovery\` handler doesn&#39;t restart the application,</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// it&#39;s safe to either skip this option or set it to \`false\`.</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">WaitForDelivery</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> bool</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">// Timeout for the event delivery requests.</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">Timeout</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> time</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">Duration</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">Usage</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">sentrygin</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> attaches</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> an</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> instance</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> of</span><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;"> *</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">sentry</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">Hub</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">https</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">//pkg.go.dev/github.com/getsentry/sentry-go#Hub) to the *gin.Context, which makes it available throughout the rest of the request&#39;s lifetime. You can access it by using the sentrygin.GetHubFromContext() method on the context itself in any of your proceeding middleware and routes. And it should be used instead of the global sentry.CaptureMessage, sentry.CaptureException, or any other calls, as it keeps the separation of data between the requests.</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">Keep</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> in</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> mind</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> that</span><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;"> *</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">sentry</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">Hub</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> won</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;</span><span style="--shiki-light:white;--shiki-dark:#FFFFFF;">t be available in middleware attached before sentrygin!</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:white;--shiki-dark:#FFFFFF;">Go</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:white;--shiki-dark:#FFFFFF;">Copied</span></span>
<span class="line"><span style="--shiki-light:white;--shiki-dark:#FFFFFF;">app := gin.Default()</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:white;--shiki-dark:#FFFFFF;">app.Use(sentrygin.New(sentrygin.Options{</span></span>
<span class="line"><span style="--shiki-light:white;--shiki-dark:#FFFFFF;">	Repanic: true,</span></span>
<span class="line"><span style="--shiki-light:white;--shiki-dark:#FFFFFF;">}))</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:white;--shiki-dark:#FFFFFF;">app.Use(func(ctx *gin.Context) {</span></span>
<span class="line"><span style="--shiki-light:white;--shiki-dark:#FFFFFF;">	if hub := sentrygin.GetHubFromContext(ctx); hub != nil {</span></span>
<span class="line"><span style="--shiki-light:white;--shiki-dark:#FFFFFF;">		hub.Scope().SetTag(&quot;someRandomTag&quot;, &quot;maybeYouNeedIt&quot;)</span></span>
<span class="line"><span style="--shiki-light:white;--shiki-dark:#FFFFFF;">	}</span></span>
<span class="line"><span style="--shiki-light:white;--shiki-dark:#FFFFFF;">	ctx.Next()</span></span>
<span class="line"><span style="--shiki-light:white;--shiki-dark:#FFFFFF;">})</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:white;--shiki-dark:#FFFFFF;">app.GET(&quot;/&quot;, func(ctx *gin.Context) {</span></span>
<span class="line"><span style="--shiki-light:white;--shiki-dark:#FFFFFF;">	if hub := sentrygin.GetHubFromContext(ctx); hub != nil {</span></span>
<span class="line"><span style="--shiki-light:white;--shiki-dark:#FFFFFF;">		hub.WithScope(func(scope *sentry.Scope) {</span></span>
<span class="line"><span style="--shiki-light:white;--shiki-dark:#FFFFFF;">			scope.SetExtra(&quot;unwantedQuery&quot;, &quot;someQueryDataMaybe&quot;)</span></span>
<span class="line"><span style="--shiki-light:white;--shiki-dark:#FFFFFF;">			hub.CaptureMessage(&quot;User provided unwanted query string, but we recovered just fine&quot;)</span></span>
<span class="line"><span style="--shiki-light:white;--shiki-dark:#FFFFFF;">		})</span></span>
<span class="line"><span style="--shiki-light:white;--shiki-dark:#FFFFFF;">	}</span></span>
<span class="line"><span style="--shiki-light:white;--shiki-dark:#FFFFFF;">	ctx.Status(http.StatusOK)</span></span>
<span class="line"><span style="--shiki-light:white;--shiki-dark:#FFFFFF;">})</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:white;--shiki-dark:#FFFFFF;">app.GET(&quot;/foo&quot;, func(ctx *gin.Context) {</span></span>
<span class="line"><span style="--shiki-light:white;--shiki-dark:#FFFFFF;">	// sentrygin handler will catch it just fine. Also, because we attached &quot;someRandomTag&quot;</span></span>
<span class="line"><span style="--shiki-light:white;--shiki-dark:#FFFFFF;">	// in the middleware before, it will be sent through as well</span></span>
<span class="line"><span style="--shiki-light:white;--shiki-dark:#FFFFFF;">	panic(&quot;y tho&quot;)</span></span>
<span class="line"><span style="--shiki-light:white;--shiki-dark:#FFFFFF;">})</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:white;--shiki-dark:#FFFFFF;">app.Run(&quot;:3000&quot;)</span></span>
<span class="line"><span style="--shiki-light:white;--shiki-dark:#FFFFFF;">Accessing Request in BeforeSend callback</span></span>
<span class="line"><span style="--shiki-light:white;--shiki-dark:#FFFFFF;">Go</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:white;--shiki-dark:#FFFFFF;">Copied</span></span>
<span class="line"><span style="--shiki-light:white;--shiki-dark:#FFFFFF;">sentry.Init(sentry.ClientOptions{</span></span>
<span class="line"><span style="--shiki-light:white;--shiki-dark:#FFFFFF;">	Dsn: &quot;https://0b5c4c7a72494aa8a43da8d56c1f7427@o84114.ingest.us.sentry.io/183603&quot;,</span></span>
<span class="line"><span style="--shiki-light:white;--shiki-dark:#FFFFFF;">	BeforeSend: func(event *sentry.Event, hint *sentry.EventHint) *sentry.Event {</span></span>
<span class="line"><span style="--shiki-light:white;--shiki-dark:#FFFFFF;">		if hint.Context != nil {</span></span>
<span class="line"><span style="--shiki-light:white;--shiki-dark:#FFFFFF;">			if req, ok := hint.Context.Value(sentry.RequestContextKey).(*http.Request); ok {</span></span>
<span class="line"><span style="--shiki-light:white;--shiki-dark:#FFFFFF;">				// You have access to the original Request here</span></span>
<span class="line"><span style="--shiki-light:white;--shiki-dark:#FFFFFF;">			}</span></span>
<span class="line"><span style="--shiki-light:white;--shiki-dark:#FFFFFF;">		}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:white;--shiki-dark:#FFFFFF;">		return event</span></span>
<span class="line"><span style="--shiki-light:white;--shiki-dark:#FFFFFF;">	},</span></span>
<span class="line"><span style="--shiki-light:white;--shiki-dark:#FFFFFF;">})</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="文档" tabindex="-1"><a class="header-anchor" href="#文档"><span>文档</span></a></h2><ul><li><a href="https://docs.sentry.io/platforms/go/" target="_blank" rel="noopener noreferrer">docs</a></li><li><a href="https://github.com/getsentry/sentry-go" target="_blank" rel="noopener noreferrer">sentry-go</a></li></ul>`,7),t=[l];function h(p,k){return n(),i("div",null,t)}const F=s(e,[["render",h],["__file","sentry.html.vue"]]),c=JSON.parse('{"path":"/golang/performance/sentry.html","title":"golang 性能监听工具 sentry","lang":"zh-CN","frontmatter":{"title":"golang 性能监听工具 sentry","icon":"golang2","description":"Sentry是一个开源的应用性能监控（Application Performance Monitoring，APM）和错误追踪平台。 它帮助开发人员监控应用程序的性能、捕获和分析错误，以便及时发现并解决潜在的问题，提高应用程序的稳定性和用户体验 安装 使用代码： 文档 docs sentry-go","head":[["meta",{"property":"og:url","content":"https://costalong.com/website/golang/performance/sentry.html"}],["meta",{"property":"og:site_name","content":"云原生笔记"}],["meta",{"property":"og:title","content":"golang 性能监听工具 sentry"}],["meta",{"property":"og:description","content":"Sentry是一个开源的应用性能监控（Application Performance Monitoring，APM）和错误追踪平台。 它帮助开发人员监控应用程序的性能、捕获和分析错误，以便及时发现并解决潜在的问题，提高应用程序的稳定性和用户体验 安装 使用代码： 文档 docs sentry-go"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-08-11T09:00:56.000Z"}],["meta",{"property":"article:author","content":"Costa Long"}],["meta",{"property":"article:modified_time","content":"2024-08-11T09:00:56.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"golang 性能监听工具 sentry\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2024-08-11T09:00:56.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Costa Long\\",\\"url\\":\\"https://costalong.com\\"}]}"]]},"headers":[{"level":2,"title":"安装","slug":"安装","link":"#安装","children":[]},{"level":2,"title":"使用代码：","slug":"使用代码","link":"#使用代码","children":[]},{"level":2,"title":"文档","slug":"文档","link":"#文档","children":[]}],"git":{"createdTime":1723366856000,"updatedTime":1723366856000,"contributors":[{"name":"costa92","email":"944310536@qq.com","commits":1}]},"readingTime":{"minutes":2.33,"words":698},"filePathRelative":"golang/performance/sentry.md","localizedDate":"2024年8月11日","autoDesc":true,"excerpt":"<p>Sentry是一个开源的应用性能监控（Application Performance Monitoring，APM）和错误追踪平台。 它帮助开发人员监控应用程序的性能、捕获和分析错误，以便及时发现并解决潜在的问题，提高应用程序的稳定性和用户体验</p>\\n<h2>安装</h2>\\n<div class=\\"language-bash line-numbers-mode\\" data-highlighter=\\"shiki\\" data-ext=\\"bash\\" data-title=\\"bash\\" style=\\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\\"><pre class=\\"shiki shiki-themes one-light one-dark-pro vp-code\\"><code><span class=\\"line\\"><span style=\\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\\">go</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> get</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> github.com/getsentry/sentry-go</span></span></code></pre>\\n<div class=\\"line-numbers\\" aria-hidden=\\"true\\" style=\\"counter-reset:line-number 0\\"><div class=\\"line-number\\"></div></div></div>"}');export{F as comp,c as data};
